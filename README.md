# PyPy_vs_CPython

## Оглавление

[Интерпретаторы питона](https://github.com/Asklepiad/PyPy_vs_CPython/tree/main#интерпретаторы-питона)

[JIT-компилятор](https://github.com/Asklepiad/PyPy_vs_CPython/tree/main#jit-компилятор)

[Установка PyPy, настройка окружения](https://github.com/Asklepiad/PyPy_vs_CPython/tree/main#установка-PyPy-настройка-окружения)

[Бенчмаркинг и различия](https://github.com/Asklepiad/PyPy_vs_CPython/tree/main#бенчмаркинг-и-различия)

## Интерпретаторы питона

Python - типичная гетерозигота от скрещивания компилируемых и интерпретируемых языков программирования, с соответствующей скоростью исполнения. Схема выполнения питона представлена на риснуке 1:

**Рисунок 1**

Так исходный код компилируется в байт-код. Байт-код - это низкоуровневый код, который, тем не менее, исполняется медленнее машинного кода (в который компилируется, например, код на C). Кроме того, результат работы байт-кода (файл с расширением .pyc) оптимизирует импорт файлов. PVM или виртуальная машина питона - это цикл, который, который обходит инструкции байт-кода и исполняет их.

###  CPython

Все сказанное выше справедливо для CPython - стандартной реализации языка. Это тот самый питон, которым мы пользовались весь год. Своим названием он обязан тому, что написан на C. Больше к этому добавить нечего

### Какие-то еще реализации.

Есть Jython - питон, написанный на Java. Он полезен для тех, кому требуется испортировать классы Java в питон (что бы это не значило). Есть еще IronPython (написан на C#, интегрирован с с платформами .NET и Mono для Windows и Linux соответственно), Stackless, который меняет особенности поточного программирования, и PyPy. О последнем поговорим подробнее.

### PyPy

Если CPython - питон на си, Jython - питон на джаве, то PyPy, говоря грубо, питон на питоне. У него сильно выше скорость и оптимизировано пространство памяти (с бенчмаркингом можно ознакомиться на рисунке 2), но есть ряд особенностей и органичений.

**Рисунок 2**

## JIT-компилятор

JIT-компилятор компилирует (а что еще делать компилятору) байт-код в двоичный код в процессе выполнения программы. При этом схема выполнения питона несколько меняется:

**Рисунок 3**

## Установка PyPy, настройка окружения

### Технические параметры.
- Операционная система: Ubuntu 20.04. 
- Версия Python для CPython - 3.9.13
- Версия Python для PyPy - 3.9.16.
- Версия PyPy - 7.3.11 with GCC 12.2.0
- Conda - miniconda 23.3.1

### Установка

Я загружал PyPy через конду в одноименном виртуальном окружении:

```{bash}
conda create -c conda-forge -n pypy pypy python=3.9
conda activate pypy
```

Далее, находясь в этом окружении, создал еще одно, посредством pip, и настроил новый кернел для ноутбука.

```{bash}
pypy3 -m venv PyPy3
source PyPy3/bin/activate  # in POSIX, or...
pypy3 -m pip install ipykernel
ipython kernel install --user --name=PyPy3
```

## Бенчмаркинг и различия

### Поддержка версий.
Если для работы вам необходим питон версии 3.10 и выше, то PyPy - не ваш выбор. Последняя версия PyPy на момент написания ридми (25.05.23) - 7.3.11 with GCC 12.2.0 поддерживет питон версии 3.9.16. В документации и статьях по ссылкам в конце ридми вы можете встретить информацию, что самая новая версия поддерживает питон 3.6 или 3.7 - эти данные устарели.

### Сборщик мусора

### Базовый питон

### Питон с библиотеками

### Прочее

### Ошибки в ходе бенчмаркинга

## Источники информации и полезные ссылки
